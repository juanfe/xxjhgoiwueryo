{% extends "dojango/base.html" %}

{% block dojango_page_title %}
Grid for Bids per Loan
{% endblock %}

{% block _dojango_dojo_styles %}
<link rel="stylesheet" type="text/css"
 href="http://ajax.googleapis.com/ajax/libs/dojo/1.5/dijit/themes/claro/claro.css" />
 
<link rel="stylesheet" type="text/css"
 href="http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojox/grid/resources/Grid.css" />
 
 <link rel="stylesheet" type="text/css"
 href="http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojox/grid/resources/claroGrid.css" />
{% endblock %}

 
{% block dojango_content %}
    <div style="width: 600px; height: 200px">
        <table id="billsGrid" dojoType="dojox.grid.DataGrid">
            <thead>
		{% if loans %}
                <tr>
			<th field="bid_loan">Bids/Loans</th>
			{% for l in loans %}
			<th field="{{ l }}">{{ l }}</th>
			{% endfor %}
                </tr>
		{% else %}
                     <p>No Loans assigned.</p>
                {% endif %}
            </thead>
        </table>
    </div>
 
<script type="text/javascript"
 src="http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojo/dojo.xd.js"
    djConfig="parseOnLoad:true"></script>
 
<script type="text/javascript">
    dojo.require("dojox.grid.DataGrid");
    dojo.require("dojo.data.ItemFileReadStore");
</script>
 
<script type="text/javascript">
dojo.ready(function() {
    var theGreatestTeamOfAllTime = {
        items: [ 
		{% for bid in bids %}		
		  {
			{% for v in bid %}
				{% if v.bid %}
				"bid_loan": "{{ v.bid }}",
				{% else %}
				"{{ v.key }}": "{{ v.val }}", 
				{% endif %}
			{% endfor %}
                  },
		{% endfor %}
		],
	identifier: "bid_loan" };
 
    var dataStore =
    new dojo.data.ItemFileReadStore(
        { data:theGreatestTeamOfAllTime }
    );
    var grid = dijit.byId("billsGrid");
    grid.setStore(dataStore);
});
</script>
{% endblock %}

